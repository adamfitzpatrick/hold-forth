language: node_js
node_js:
- 5.0.0
env:
- CXX=g++-4.8
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
script: npm run ci
env:
- DO_DEPLOY=$(echo $TRAVIS_BRANCH | grep "^[0-9].[0-9].[0-9]-\?[a-zA-Z]*\.\?[0-9]*$")
deploy:
  provider: s3
  region: us-west-2
  bucket: stepinto.io-static-resources
  local-dir: public
  acl: public_read
  on:
    all_branches: true
    condition: ${#DO_DEPLOY} -gt 0
